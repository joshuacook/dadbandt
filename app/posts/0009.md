---
title: Quantum Drum Visualizer - Energy States & Generative Rhythms
date: 2025-09-28
---

Today I'm sharing the Quantum Drum Visualizer, an interactive tool for creating generative drum patterns using energy states and Markov transitions. This builds on the bohm finite state machine concept, adding visual feedback and data analysis capabilities.

## The Core Concept

The system uses 8 energy states, from "Ground" to "Maximum", each representing increasing rhythmic complexity. Users create a base pattern with "anchor notes" - fixed beats that remain constant across all states. The system then generates progressively complex variations while preserving these anchors.

![State Transitions](/bohm_transitions.png)

## Key Features

### Anchor Notes System
- Special notes marked with ⚓ symbol and gold borders
- Remain fixed across all 8 energy states  
- Act as "attractors" - new hits are 2x more likely near anchors
- Automatically regenerate all states when added/removed

### Progressive Pattern Generation
1. **Ground**: Base pattern with anchors
2. **Rising**: Adds ghost notes (velocity 30)
3. **Active**: Additional hits near anchors
4. **Intense**: Instrument swaps (closed→open hi-hat)
5. **Peak**: Subdivision fills
6. **Wild**: Cross-drum bleeding effects
7. **Chaos/Maximum**: Compound transformations

### Visual Elements
- **Pattern Grid**: 16×8 grid showing drum hits with velocity colors
- **Bohr Atom**: Electron orbits represent current energy state
- **Markov Matrix**: Real-time transition probabilities
- **Hi-hat Choking**: Realistic drum behavior

## Data Science Integration

The system now exports comprehensive session data for analysis:

```bash
# Run headless simulation
uv run src/headless_simulator.py --duration 60 --anchor-basic

# Generate analysis report
uv run analysis/generate_markdown_report.py bohm_session_*.json
```

This produces detailed reports with:
- State transition heatmaps
- Pattern density timelines
- Drum usage analysis
- Velocity distributions

![Pattern Density](/bohm_density.png)

## Technical Implementation

The architecture separates concerns cleanly:

```
quantum_drum_visualizer/
├── src/
│   ├── main.py              # GUI visualizer
│   ├── headless_simulator.py # Batch testing
│   └── parameter_test_harness.py # A/B testing
├── shared/bohm_core/
│   ├── audio_generator.py   # Pattern generation
│   ├── markov_chain.py      # State transitions
│   └── session_recorder.py  # Data export
└── analysis/
    └── generate_markdown_report.py # Analysis tools
```

## Next Steps

With the data export foundation in place, the next phase focuses on musical refinement:

1. **Parameter Tuning**: Expose generation parameters (ghost_probability, anchor_attraction) for A/B testing
2. **Decision Logging**: Track WHY each note was generated
3. **Latent State Inference**: Auto-detect energy level from playing patterns
4. **Batch Analysis**: Run 100+ sessions to find edge cases

The goal is to make the generation algorithms transparent and tunable, allowing iterative refinement based on musical taste rather than technical constraints.

## Try It Yourself

```bash
# Clone and setup
cd quantum_drum_visualizer
uv sync

# Run interactive visualizer
uv run src/main.py

# Run headless simulation
uv run src/headless_simulator.py --batch 10
```

Press 'X' during a session to export data, then analyze with the provided tools. The combination of interactive visualization and data analysis creates a feedback loop for improving generative algorithms.

This project demonstrates how data science techniques can enhance creative tools, providing both immediate musical feedback and long-term analytical insights.